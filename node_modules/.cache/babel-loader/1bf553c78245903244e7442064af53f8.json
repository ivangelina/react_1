{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\User\\\\Desktop\\\\react_3\\\\react_1\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\react_3\\\\react_1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\User\\\\Desktop\\\\react_3\\\\react_1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\User\\\\Desktop\\\\react_3\\\\react_1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\User\\\\Desktop\\\\react_3\\\\react_1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\User\\\\Desktop\\\\react_3\\\\react_1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\react_3\\\\react_1\\\\src\\\\components\\\\common\\\\SearchBox.js\";\nimport React from 'react';\nimport SearchField from './SearchField';\nimport MovieList from './MovieList';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport * as actions from \"../../redux/actions\";\n\nvar SearchBox =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SearchBox, _React$Component);\n\n  function SearchBox(props) {\n    var _this;\n\n    _classCallCheck(this, SearchBox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchBox).call(this, props));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.fetchMovies();\n\n            case 2:\n              response = _context.sent;\n\n              _this.setState({\n                movies: response,\n                filteredMovies: response\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.searchValueChanged = function (event) {\n      var inputValue = event.target.value;\n\n      _this.setState({\n        searchValue: inputValue,\n        filteredMovies: _this.getRemainingMovies(inputValue)\n      });\n\n      _this.props.changeInputText(inputValue);\n    };\n\n    _this.getRemainingMovies = function (searchValue) {\n      var remainingMovies = _this.state.movies.filter(function (movie) {\n        return movie.title.toLowerCase().indexOf(searchValue.toLowerCase()) !== -1 || movie.releaseYear.indexOf(searchValue) !== -1;\n      });\n\n      return remainingMovies;\n    };\n\n    _this.fetchMovies =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var response, responseJson;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch('https://facebook.github.io/react-native/movies.json');\n\n            case 3:\n              response = _context2.sent;\n              _context2.next = 6;\n              return response.json();\n\n            case 6:\n              responseJson = _context2.sent;\n              return _context2.abrupt(\"return\", responseJson.movies);\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n              return _context2.abrupt(\"return\", []);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this, [[0, 10]]);\n    }));\n\n    _this.render = function () {\n      return React.createElement(\"div\", {\n        className: \"search-box-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(SearchField, {\n        searchValue: _this.state.searchValue,\n        searchValueChanged: _this.searchValueChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), React.createElement(MovieList, {\n        movies: _this.state.filteredMovies,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }));\n    };\n\n    _this.state = {\n      movies: [],\n      filteredMovies: [],\n      searchValue: ''\n    };\n    return _this;\n  }\n\n  return SearchBox;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    inputText: state.inputText\n  };\n};\n\nvar mapStateToDispatch = function mapStateToDispatch(dispatch) {\n  return bindActionCreators({\n    changeInputText: actions.changeInputText,\n    changeSelectedMovies: actions.changeSelectedMovies\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapStateToDispatch)(SearchBox);","map":{"version":3,"sources":["C:\\Users\\User\\Desktop\\react_3\\react_1\\src\\components\\common\\SearchBox.js"],"names":["React","SearchField","MovieList","connect","bindActionCreators","actions","SearchBox","props","componentDidMount","fetchMovies","response","setState","movies","filteredMovies","searchValueChanged","event","inputValue","target","value","searchValue","getRemainingMovies","changeInputText","remainingMovies","state","filter","movie","title","toLowerCase","indexOf","releaseYear","fetch","json","responseJson","console","error","render","Component","mapStateToProps","inputText","mapStateToDispatch","dispatch","changeSelectedMovies"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport SearchField from './SearchField';\r\nimport MovieList from './MovieList';\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport * as actions from \"../../redux/actions\";\r\n\r\nclass SearchBox extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = { \r\n            movies: [],\r\n            filteredMovies: [],\r\n            searchValue: '',\r\n        }\r\n    }\r\n    componentDidMount = async () => {\r\n        const response = await this.fetchMovies();\r\n        this.setState({\r\n            movies: response,\r\n            filteredMovies: response\r\n        })\r\n    }\r\n    searchValueChanged = event => {\r\n        const inputValue = event.target.value;\r\n        this.setState({\r\n            searchValue: inputValue,\r\n            filteredMovies: this.getRemainingMovies(inputValue)\r\n        });\r\n\r\n        this.props.changeInputText(inputValue);\r\n    }\r\n    getRemainingMovies = searchValue => {\r\n        const remainingMovies = \r\n        this.state.movies.filter( movie => {\r\n            return movie.title.toLowerCase()\r\n            .indexOf(searchValue.toLowerCase()) !== -1 \r\n            || movie.releaseYear.indexOf(searchValue) !== -1;\r\n        })\r\n        return remainingMovies;\r\n    }\r\n    fetchMovies = async () => {\r\n        try {\r\n            const response = await fetch(\r\n              'https://facebook.github.io/react-native/movies.json',\r\n            );\r\n            const responseJson = await response.json();\r\n            return responseJson.movies;\r\n        } catch (error) {\r\n            console.error(error);\r\n            return [];\r\n        }\r\n    }\r\n    render = () => \r\n    <div className=\"search-box-container\">\r\n        <SearchField \r\n            searchValue={this.state.searchValue}\r\n            searchValueChanged={this.searchValueChanged}\r\n        />\r\n        <MovieList movies={this.state.filteredMovies}/>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        inputText: state.inputText\r\n    }\r\n};\r\n\r\nconst mapStateToDispatch = dispatch =>  \r\n    bindActionCreators({\r\n        changeInputText: actions.changeInputText,\r\n        changeSelectedMovies: actions.changeSelectedMovies\r\n    }, dispatch)\r\n\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapStateToDispatch\r\n)(SearchBox);"]},"metadata":{},"sourceType":"module"}